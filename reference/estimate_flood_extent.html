<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Estimates the typical maximum extent of the open water footprint in each unit
as a percentile of all observations in the dataset, helping to correct for
upland areas that may be included within each unit that are rarely, if ever,
flooded."><title>Estimate flooding extent — estimate_flood_extent • WHAT</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Estimate flooding extent — estimate_flood_extent"><meta property="og:description" content="Estimates the typical maximum extent of the open water footprint in each unit
as a percentile of all observations in the dataset, helping to correct for
upland areas that may be included within each unit that are rarely, if ever,
flooded."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">WHAT</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/pointblue/WHAT/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Estimate flooding extent</h1>
      <small class="dont-index">Source: <a href="https://github.com/pointblue/WHAT/blob/HEAD/R/estimate_flood_extent.R" class="external-link"><code>R/estimate_flood_extent.R</code></a></small>
      <div class="d-none name"><code>estimate_flood_extent.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Estimates the typical maximum extent of the open water footprint in each unit
as a percentile of all observations in the dataset, helping to correct for
upland areas that may be included within each unit that are rarely, if ever,
flooded.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">estimate_flood_extent</span><span class="op">(</span></span>
<span>  <span class="va">df</span>,</span>
<span>  prob <span class="op">=</span> <span class="fl">0.95</span>,</span>
<span>  full_prop_threshold <span class="op">=</span> <span class="fl">0.55</span>,</span>
<span>  wet_prop_threshold <span class="op">=</span> <span class="fl">0.2</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>df</dt>
<dd><p>Input tibble from <code><a href="format_watertracker.html">format_watertracker()</a></code>.</p></dd>


<dt>prob</dt>
<dd><p>Single numeric value passed to <code><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile()</a></code>; see Details.</p></dd>


<dt>full_prop_threshold</dt>
<dd><p>Numeric value (0-1); see Details.</p></dd>


<dt>wet_prop_threshold</dt>
<dd><p>Numeric value (0-1); see Details.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>tibble with added fields: <code>ObservedAreaWater_pq</code>,
<code>ObservedAreaWater_adjust</code>, <code>flood_prop</code>, and <code>flood_status</code></p>


    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>For each unit, calculates <code>ObservedAreaWater_pq</code> as a percentile
value, as determined by <code>prob</code>, of all <code>ObservedAreaWaterHa</code> in the dataset
(as provided in the raw Water Tracker data). This value is intended to
represent the typical upper limit of wetted area, to account for upland
areas in the unit that are not typically flooded as part of regular
management.</p>
<p>The value for <code>prob</code> should typically be set less than 1 to allow for
outliers resulting from occasional extreme flooding events, such as driven
by precipitation. (Note that providing multiple values of <code>prob</code>, while
supported by the <code><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile()</a></code> function, is not supported by this function.)</p>
<p>The <code>ObservedAreaWater_adjust</code> is then calculated to reflect this upper
limit of wetted area, such that values of <code>ObservedAreaWaterHa</code> that exceed
<code>ObservedAreaWater_pq</code> are reduced to this value. Likewise, <code>flood_prop</code> is
calculated as the proportion of observed <code>ObservedAreaWater_adjust</code> on each
date relative to this upper limit.</p>
<p>Finally a categorical <code>flood_status</code> is assigned to each observation date as:</p><ul><li><p><code>full</code>: <code>flood_prop</code> &gt;= <code>full_prop_threshold</code></p></li>
<li><p><code>wet</code>: <code>wet_prop_threshold</code> &lt;= <code>flood_prop</code> &lt; <code>full_prop_threshold</code>,</p></li>
<li><p><code>trace</code>: <code>flood_prop</code> &gt; 0 but &lt; <code>wet prop threshold</code></p></li>
<li><p><code>dry</code>: <code>flood_prop</code> = 0</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">df</span> <span class="op">=</span> <span class="fu"><a href="format_watertracker.html">format_watertracker</a></span><span class="op">(</span><span class="va">sampledat</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">estimate_flood_extent</span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 5,474 × 23</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    wateryear month month_name  year obsdate    unit        WETLAND CLASS AREA_HA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span>      <span style="text-decoration: underline;">2</span>013     5 May         <span style="text-decoration: underline;">2</span>013 2013-05-11 SampleWetl… Sample… mana…    37.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span>      <span style="text-decoration: underline;">2</span>013     5 May         <span style="text-decoration: underline;">2</span>013 2013-05-27 SampleWetl… Sample… mana…    37.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span>      <span style="text-decoration: underline;">2</span>013     6 Jun         <span style="text-decoration: underline;">2</span>013 2013-06-12 SampleWetl… Sample… mana…    37.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span>      <span style="text-decoration: underline;">2</span>013     6 Jun         <span style="text-decoration: underline;">2</span>013 2013-06-28 SampleWetl… Sample… mana…    37.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span>      <span style="text-decoration: underline;">2</span>013     7 Jul         <span style="text-decoration: underline;">2</span>013 2013-07-14 SampleWetl… Sample… mana…    37.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span>      <span style="text-decoration: underline;">2</span>013     7 Jul         <span style="text-decoration: underline;">2</span>013 2013-07-30 SampleWetl… Sample… mana…    37.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span>      <span style="text-decoration: underline;">2</span>013     8 Aug         <span style="text-decoration: underline;">2</span>013 2013-08-10 SampleWetl… Sample… mana…    37.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span>      <span style="text-decoration: underline;">2</span>013     8 Aug         <span style="text-decoration: underline;">2</span>013 2013-08-19 SampleWetl… Sample… mana…    37.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span>      <span style="text-decoration: underline;">2</span>013     8 Aug         <span style="text-decoration: underline;">2</span>013 2013-08-26 SampleWetl… Sample… mana…    37.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span>      <span style="text-decoration: underline;">2</span>013     9 Sep         <span style="text-decoration: underline;">2</span>013 2013-09-04 SampleWetl… Sample… mana…    37.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 5,464 more rows</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 14 more variables: AREA_AC &lt;dbl&gt;, Mosaic &lt;chr&gt;, MosaicDateStart &lt;date&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   MosaicDateEnd &lt;date&gt;, ObservedPixels &lt;dbl&gt;, WaterPixels &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   ObservedAreaHa &lt;dbl&gt;, ObservedAreaWaterHa &lt;dbl&gt;, PercentObserved &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   PercentWater &lt;dbl&gt;, ObservedAreaWaterHa_pq &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   ObservedAreaWater_adjust &lt;dbl&gt;, flood_prop &lt;dbl&gt;, flood_status &lt;chr&gt;</span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Kristen Dybala.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

