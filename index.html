<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Supports estimation of wetland water management schedules in 
    California’s Central Valley through analysis of near-real-time, automated 
    hydrological data from Point Blue's Water Tracker.">
<title>Wetland Hydrological Analysis Tools • WHAT</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Wetland Hydrological Analysis Tools">
<meta property="og:description" content="Supports estimation of wetland water management schedules in 
    California’s Central Valley through analysis of near-real-time, automated 
    hydrological data from Point Blue's Water Tracker.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">WHAT</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/pointblue/WHAT/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="what-wetland-hydrological-analysis-tools">WHAT: Wetland Hydrological Analysis Tools<a class="anchor" aria-label="anchor" href="#what-wetland-hydrological-analysis-tools"></a>
</h1></div>
<!-- badges: start -->

<p>WHAT supports estimation of wetland water management schedules in California’s Central Valley through analysis of near-real-time, automated hydrological data from Point Blue’s <a href="https://www.pointblue.org/watertracker" class="external-link">Water Tracker</a>.</p>
<p>Water Tracker uses LandSat satellite imagery to detect open surface water in the Central Valley and estimate the proportion of a given spatial unit that is flooded on a given date. WHAT supports estimating the typical maximum extent of flooding in individual units across multiple water years, variation in the timing and extent of flooding among water years, and estimating the timing of water management schedules, such as floodup and drawdown.</p>
<p>WHAT is intended for application to spatial units representing individual wetland management units, and provides support for summarizing across multiple units within a larger region, such as a Groundwater Sustainability Plan area. Known and likely wetland management unit boundaries have already been integrated into WaterTracker’s automated processing of satellite imagery, to facilitate application of tools in the WHAT package, but hydrological data within custom boundaries can also be requested from WaterTracker by uploading a shapefile or drawing a custom spatial area.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of WHAT from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"pointblue/WHAT"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a>
</h2>
<p>Using sample data included, estimate the 95th percentile of the wetted area detected in each wetland management unit over all water years included:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/pointblue/WHAT" class="external-link">WHAT</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">sampledat</span><span class="op">)</span></span>
<span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/format_watertracker.html">format_watertracker</a></span><span class="op">(</span><span class="va">sampledat</span><span class="op">[</span><span class="va">sampledat</span><span class="op">$</span><span class="va">WETLAND</span> <span class="op">==</span> <span class="st">'SampleWetland1'</span>,<span class="op">]</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="reference/estimate_flood_extent.html">estimate_flood_extent</a></span><span class="op">(</span>prob <span class="op">=</span> <span class="fl">0.95</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">dat</span>, <span class="va">unit</span>, <span class="va">ObservedAreaWaterHa_pq</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 9 × 2</span></span>
<span><span class="co">#&gt;   unit                 ObservedAreaWaterHa_pq</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;                                 &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 SampleWetland1_Unit1                24.8   </span></span>
<span><span class="co">#&gt; 2 SampleWetland1_Unit2                 3.05  </span></span>
<span><span class="co">#&gt; 3 SampleWetland1_Unit3                 0.261 </span></span>
<span><span class="co">#&gt; 4 SampleWetland1_Unit4                 2.43  </span></span>
<span><span class="co">#&gt; 5 SampleWetland1_Unit5                 0.285 </span></span>
<span><span class="co">#&gt; 6 SampleWetland1_Unit6                 0.0564</span></span>
<span><span class="co">#&gt; 7 SampleWetland1_Unit7                36.7   </span></span>
<span><span class="co">#&gt; 8 SampleWetland1_Unit8                51.0   </span></span>
<span><span class="co">#&gt; 9 SampleWetland1_Unit9                 6.75</span></span></code></pre></div>
<p>Interpolate the extent of flooding onto a common set of dates to explore variation across water years (for an individual unit or combinations of units):</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dat_interp</span> <span class="op">=</span> <span class="fu"><a href="reference/interpolate_flooding.html">interpolate_flooding</a></span><span class="op">(</span></span>
<span>  <span class="va">dat</span><span class="op">[</span><span class="va">dat</span><span class="op">$</span><span class="va">unit</span> <span class="op">==</span> <span class="st">'SampleWetland1_Unit2'</span>,<span class="op">]</span>, </span>
<span>  wateryear <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2014</span>, <span class="fl">2015</span>, <span class="fl">2016</span>, <span class="fl">2017</span><span class="op">)</span>, </span>
<span>  interval <span class="op">=</span> <span class="st">'week'</span><span class="op">)</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu">ggplot</span><span class="op">(</span><span class="va">dat_interp</span>, <span class="fu">aes</span><span class="op">(</span><span class="va">interval</span>, <span class="va">AreaWater_ac</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">geom_line</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">facet_wrap</span><span class="op">(</span><span class="op">~</span><span class="va">wateryear</span>, ncol <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_x_continuous</span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">53</span>, <span class="fl">4</span><span class="op">)</span>, </span>
<span>                     labels <span class="op">=</span> <span class="va">dat_interp</span><span class="op">$</span><span class="va">date</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">53</span>, <span class="fl">4</span><span class="op">)</span><span class="op">]</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="st">'%b-%d'</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>x <span class="op">=</span> <span class="cn">NULL</span>, y <span class="op">=</span> <span class="st">'Acres Flooded'</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-example_interpolate-1.png" width="100%"></p>
<p>Interpret the sequence of WaterTracker observations to detect monthly modes in each unit, and optionally generalize across multiple water years to estimate the general wetland management schedule:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/estimate_flood_delta.html">estimate_flood_delta</a></span><span class="op">(</span><span class="va">dat</span><span class="op">[</span><span class="va">dat</span><span class="op">$</span><span class="va">unit</span> <span class="op">==</span> <span class="st">'SampleWetland1_Unit2'</span>,<span class="op">]</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="reference/estimate_wetland_mode.html">estimate_wetland_mode</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="reference/generalize_wetland_mode.html">generalize_wetland_mode</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">month_name</span>, <span class="va">mode</span>, <span class="va">weight</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">12</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 12 × 3</span></span>
<span><span class="co">#&gt;    month_name mode  weight</span></span>
<span><span class="co">#&gt;    &lt;fct&gt;      &lt;fct&gt;  &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1 Oct        F      0.636</span></span>
<span><span class="co">#&gt;  2 Nov        M      0.8  </span></span>
<span><span class="co">#&gt;  3 Dec        M      1    </span></span>
<span><span class="co">#&gt;  4 Jan        M      1    </span></span>
<span><span class="co">#&gt;  5 Feb        M      1    </span></span>
<span><span class="co">#&gt;  6 Mar        M      1    </span></span>
<span><span class="co">#&gt;  7 Apr        D      0.455</span></span>
<span><span class="co">#&gt;  8 May        N      0.455</span></span>
<span><span class="co">#&gt;  9 Jun        N      0.727</span></span>
<span><span class="co">#&gt; 10 Jul        N      1    </span></span>
<span><span class="co">#&gt; 11 Aug        N      1    </span></span>
<span><span class="co">#&gt; 12 Sep        N      0.818</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="funding-statement">Funding Statement<a class="anchor" aria-label="anchor" href="#funding-statement"></a>
</h2>
<p>This package was originally developed as part of the project “California Central Valley Wetlands Water Budget Tool Development”, Grant No. R21AP10037-00, a WaterSMART (Sustain and Manage America’s Resources for Tomorrow) Applied Science Grant from the U.S. Bureau of Reclamation.</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/pointblue/WHAT/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/pointblue/WHAT/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>GPL (&gt;= 3)</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing WHAT</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Kristen Dybala <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-2787-4600" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://www.repostatus.org/#active" class="external-link"><img src="https://www.repostatus.org/badges/latest/active.svg" alt="Project Status: Active - The project has reached a stable, usable state and is being actively developed."></a></li>
<li><a href="https://lifecycle.r-lib.org/articles/stages.html#stable" class="external-link"><img src="https://img.shields.io/badge/lifecycle-stable-brightgreen.svg"></a></li>
<li><a href="https://cran.r-project.org/web/licenses/GPL%20(%3E=%203)" class="external-link"><img src="https://img.shields.io/badge/license-GPL%20(%3E=%203)-blue.svg" alt="License: GPL (&gt;= 3)"></a></li>
<li><a href="https://github.com/pointblue/WHAT/actions" class="external-link"><img src="https://github.com/pointblue/WHAT/workflows/R-CMD-check/badge.svg" alt="R build status"></a></li>
<li><a href="https://zenodo.org/doi/10.5281/zenodo.10895876" class="external-link"><img src="https://zenodo.org/badge/679839985.svg" alt="DOI"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Kristen Dybala.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
